<style>
    /* =========================================
       KUANDA ULTIMATE HOME CSS
       ========================================= */
    
    :root {
        --k-red: #E31C25;
        --k-black: #0F0F0F;
        --k-gold: #FFC107;
        --bg-body: #FAFAFA;
        --card-radius: 20px;
    }

    /* Animações Globais */
    .fade-up { animation: fadeUp 0.8s ease forwards; opacity: 0; transform: translateY(30px); }
    @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

    /* 1. HERO & TEXTO */
    .hero-text-section {
        text-align: center; padding: 40px 20px 30px; max-width: 800px; margin: 0 auto;
    }
    .hero-title {
        font-weight: 800; letter-spacing: -1px; line-height: 1.1;
        background: linear-gradient(135deg, #0F0F0F 0%, #444 100%);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

   /* ===== RESET BÁSICO (importante) ===== */
body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

/* ===== MEGA CARROSSEL FULL WIDTH ===== */
.mega-carousel-container {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
}

/* remove qualquer limitação do bootstrap */
.mega-carousel-container .carousel {
    width: 100%;
}

/* imagens do banner */
.mega-carousel-container .carousel-item img {
    width: 100%;
    height: 480px;
    object-fit: cover;
    display: block;
}

/* fallback quando não há banners */
.banner-fallback {
    width: 100%;
    height: 480px;
    background: linear-gradient(45deg, #111, #333);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
}

/* ===== MOBILE ===== */
@media (max-width: 768px) {
    .mega-carousel-container .carousel-item img,
    .banner-fallback {
        height: 260px;
    }
}

    /* 3. PARCEIROS (INFINITE SCROLL) */
    .partners-section { overflow: hidden; padding: 20px 0; background: white; border-top: 1px solid #f0f0f0; border-bottom: 1px solid #f0f0f0; margin-bottom: 40px; }
    .partners-track {
        display: flex; gap: 40px; width: max-content;
        animation: scrollPartners 30s linear infinite;
    }
    .partner-logo {
        height: 50px; width: auto; filter: grayscale(100%); opacity: 0.6; transition: 0.3s;
    }
    .partner-logo:hover { filter: grayscale(0%); opacity: 1; transform: scale(1.1); }
    
    @keyframes scrollPartners { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

    /* 4. PLANOS (PRICING) */
    .plans-grid {
        display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 50px;
    }
    .plan-card {
        background: white; border-radius: 24px; padding: 30px; position: relative;
        border: 1px solid rgba(0,0,0,0.05); box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        display: flex; flex-direction: column; align-items: center; text-align: center;
        transition: 0.3s;
    }
    .plan-card:hover { transform: translateY(-10px); box-shadow: 0 20px 50px rgba(0,0,0,0.1); }
    
    .plan-featured {
        border: 2px solid var(--k-red); transform: scale(1.05); z-index: 2;
        background: linear-gradient(135deg, #fff 0%, #FFF5F5 100%);
    }
    .plan-featured:hover { transform: scale(1.08); }
    
    .plan-name { font-size: 1rem; font-weight: 800; text-transform: uppercase; color: #888; letter-spacing: 1px; margin-bottom: 10px; }
    .plan-price { font-size: 2.5rem; font-weight: 800; color: var(--k-black); margin-bottom: 20px; line-height: 1; }
    .plan-price span { font-size: 1rem; color: #999; font-weight: 500; }
    .plan-features { list-style: none; padding: 0; margin-bottom: 25px; flex-grow: 1; }
    .plan-features li { margin-bottom: 10px; color: #555; font-size: 0.9rem; }
    .plan-features i { color: var(--k-red); margin-right: 5px; }
    
    .btn-plan {
        padding: 12px 30px; border-radius: 50px; font-weight: 700; text-decoration: none; transition: 0.2s;
    }
    .btn-outline { border: 2px solid var(--k-black); color: var(--k-black); }
    .btn-solid { background: var(--k-red); color: white; border: none; box-shadow: 0 10px 20px rgba(227, 28, 37, 0.3); }

   /* ================= VIDEO ADS – GLASS STORY ================= */

.video-ads-section {
    padding: 0 10px;
}

/* GRID */
.video-glass-grid {
    display: grid;
    gap: 20px;
}

/* MOBILE PEQUENO → 2x2 */
@media (max-width: 767px) {
    .video-glass-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* TABLET */
@media (min-width: 768px) {
    .video-glass-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* DESKTOP → 4 POR LINHA */
@media (min-width: 1200px) {
    .video-glass-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* CARD VIDRO */
.video-glass-card {
    position: relative;
    aspect-ratio: 9 / 16; /* STORY REAL */
    border-radius: 26px;
    overflow: hidden;
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    box-shadow:
        0 25px 50px rgba(0,0,0,0.35),
        inset 0 1px 0 rgba(255,255,255,0.15);
    transition: transform 0.35s ease, box-shadow 0.35s ease;
}

/* VÍDEO */
.video-glass-card video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: contrast(1.05) saturate(1.1);
    transition: transform 0.5s ease;
}

/* PROFUNDIDADE NO HOVER */
@media (hover: hover) {
    .video-glass-card:hover {
        transform: translateY(-8px) scale(1.03);
        box-shadow:
            0 35px 70px rgba(0,0,0,0.45),
            inset 0 1px 0 rgba(255,255,255,0.25);
    }

    .video-glass-card:hover video {
        transform: scale(1.08);
    }
}

/* OVERLAY DE VIDRO */
.glass-overlay {
    position: absolute;
    bottom: 12px;
    left: 12px;
    right: 12px;
    padding: 14px 16px;
    border-radius: 18px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.25);
    color: #fff;
}

/* TEXTO */
.glass-overlay h5 {
    margin: 0;
    font-size: 0.95rem;
    font-weight: 700;
}

.glass-overlay span {
    font-size: 0.7rem;
    opacity: 0.85;
    letter-spacing: 0.4px;
}

    /* 7. GRID DE PRODUTOS (Matriz 3x3 Mobile) */
    .product-grid-wrapper {
        display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; /* Mobile First: 3 colunas apertadas */
    }
    @media (min-width: 768px) { .product-grid-wrapper { grid-template-columns: repeat(4, 1fr); gap: 20px; } }
    @media (min-width: 1200px) { .product-grid-wrapper { grid-template-columns: repeat(5, 1fr); gap: 24px; } }

    /* Estilo Miniatura dos Cards */
    .mini-card {
        background: white; border-radius: 16px; overflow: hidden; position: relative;
        display: flex; flex-direction: column; transition: all 0.3s ease;
        border: 1px solid rgba(0,0,0,0.03); box-shadow: 0 4px 10px rgba(0,0,0,0.03);
    }
    .mini-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.08); }

    .mini-img-box { position: relative; padding-top: 100%; background: #f8f9fa; }
    .mini-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
    
    .mini-btn-add {
        position: absolute; bottom: 8px; right: 8px; width: 32px; height: 32px;
        border-radius: 50%; background: white; color: var(--k-black);
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.15); border: none; z-index: 2; cursor: pointer;
    }
    .mini-btn-add:active { background: var(--k-red); color: white; transform: scale(0.9); }

    .mini-body { padding: 8px; flex-grow: 1; display: flex; flex-direction: column; }
    .mini-title {
        font-size: 0.75rem; font-weight: 500; color: #333; margin-bottom: 4px;
        display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
        overflow: hidden; height: 2.4em; line-height: 1.2;
    }
    .mini-price { font-weight: 700; font-size: 0.9rem; color: var(--k-black); }
    .mini-old { font-size: 0.7rem; text-decoration: line-through; color: #ccc; margin-left: 4px; }

    /* Categorias Stories */
    .cat-scroll { display: flex; gap: 15px; overflow-x: auto; padding: 10px 5px 20px; scrollbar-width: none; }
    .cat-scroll::-webkit-scrollbar { display: none; }
    .cat-bubble { min-width: 75px; display: flex; flex-direction: column; align-items: center; gap: 8px; text-decoration: none; transition: 0.2s; }
    .cat-bubble:hover { transform: translateY(-3px); }
    .cat-icon {
        width: 60px; height: 60px; border-radius: 20px; background: white;
        display: flex; align-items: center; justify-content: center; font-size: 1.4rem; color: var(--k-red);
        box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.03);
    }
    .cat-name { font-size: 0.75rem; font-weight: 600; color: #333; }

    /* Cinema Section */
    .cinema-section { background: #ffffff; color: rgb(0, 0, 0); padding: 50px 0; margin-bottom: 50px; border-radius: 0; }
    @media(min-width: 992px) { .cinema-section { border-radius: 30px; } }
    
    .movie-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }
    .movie-card {
        border-radius: 12px; overflow: hidden; position: relative; aspect-ratio: 2/3;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5); transition: 0.3s; cursor: pointer; border: 1px solid #000000;
    }
    .movie-card:hover { transform: scale(1.05); z-index: 2; box-shadow: 0 20px 50px rgba(227, 28, 37, 0.2); }
    .movie-img { width: 100%; height: 100%; object-fit: cover; }
    .movie-badge {
        position: absolute; top: 5px; right: 5px; background: #FFC107; color: black;
        padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; font-weight: 800;
    }

    /* Responsivo Extras */
    @media (max-width: 768px) {
        .plans-grid { grid-template-columns: repeat(3, 1fr); gap: 10px; overflow-x: auto; padding-bottom: 20px; } /* Mobile Horizontal ou Mini Grid */
        .plan-card { min-width: 140px; padding: 15px; }
        .plan-name { font-size: 0.7rem; }
        .plan-price { font-size: 1.5rem; }
        .plan-features { display: none; } /* Esconde features no mobile para ficar mini */
        .btn-plan { padding: 8px 15px; font-size: 0.8rem; width: 100%; }
        
        .about-section { flex-direction: column-reverse; text-align: center; padding: 30px 20px; }
        .about-logo-circle { width: 120px; height: 120px; font-size: 3rem; margin: 0 auto 20px; }
        
        .video-grid { grid-template-columns: 1fr; }
    }

   /* ================= STATIC ADS – NORMAL SIZE ================= */

.featured-ads-section {
    padding: 0 10px;
}

/* GRID BASE */
.featured-ads-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* MOBILE: 3x */
    gap: 10px;
}

/* TABLET */
@media (min-width: 768px) {
    .featured-ads-grid {
        gap: 20px;
    }
}

/* DESKTOP */
@media (min-width: 1024px) {
    .featured-ads-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
    }
}

/* CARD */
.featured-ad-card {
    position: relative;
    border-radius: 16px;
    overflow: hidden;
    background: #f5f5f5;
    aspect-ratio: 1 / 1; /* MATRIZ QUADRADA (estilo app) */
    text-decoration: none;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}

/* IMAGEM NO TAMANHO CORRETO */
.featured-ad-card img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* <<< NÃO ESTICA */
    padding: 10px;       /* respeita imagem */
    transition: transform 0.3s ease;
}

/* BADGE */
.ad-badge {
    position: absolute;
    top: 6px;
    left: 6px;
    background: rgba(0,0,0,0.7);
    color: white;
    font-size: 0.6rem;
    font-weight: 800;
    padding: 4px 8px;
    border-radius: 50px;
    letter-spacing: 0.5px;
}

.ad-badge.gold {
    background: #FFC107;
    color: #000;
}

.ad-badge.red {
    background: #E31C25;
}

/* HOVER (DESKTOP) */
@media (hover: hover) {
    .featured-ad-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.12);
    }

    .featured-ad-card:hover img {
        transform: scale(1.05);
    }
}


/* O Cartão do Banner */
.ad-banner-card {
    position: relative;
    border-radius: 24px; /* Bordas bem arredondadas (Moderno) */
    overflow: hidden;
    aspect-ratio: 16/9; /* Formato Widescreen fixo */
    background-color: #f0f0f0; /* Cor de fundo enquanto carrega */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05); /* Sombra suave */
    border: 1px solid rgba(255, 255, 255, 0.5); /* Borda sutil */
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Animação elástica */
    cursor: pointer;
}

/* Efeito Hover no Cartão */
.ad-banner-card:hover {
    transform: translateY(-8px); /* Levanta o card */
    box-shadow: 0 20px 40px rgba(227, 28, 37, 0.15); /* Sombra com cor da marca (Vermelho) */
    border-color: rgba(227, 28, 37, 0.2);
}

/* A Imagem */
.ad-banner-img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Cobre todo o espaço sem distorcer */
    object-position: center;
    transition: transform 0.6s ease; /* Zoom suave */
    display: block;
}

/* Efeito Zoom na Imagem ao passar o mouse */
.ad-banner-card:hover .ad-banner-img {
    transform: scale(1.08);
}

/* Overlay de Brilho (Opcional - dá um toque premium) */
.ad-banner-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0) 100%
    );
    transform: skewX(-25deg);
    transition: none;
    pointer-events: none;
}

.ad-banner-card:hover::after {
    left: 150%;
    transition: left 0.7s ease;
}

/* Estilos para a imagem do logo */
.about-logo-image {
    width: 180px;
    height: 180px;
    margin: 0 auto;
    position: relative;
    border-radius: 50%;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    border: 8px solid white;
}

.about-logo-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.about-logo-image:hover img {
    transform: scale(1.05);
}

/* Efeito de brilho */
.about-logo-image::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0) 100%
    );
    transform: rotate(45deg);
    animation: shine 3s infinite;
    z-index: 1;
}

@keyframes shine {
    0% {
        transform: translateX(-100%) translateY(-100%) rotate(45deg);
    }
    100% {
        transform: translateX(100%) translateY(100%) rotate(45deg);
    }
}

/* =========================================
       CATEGORIAS 3D (MÉDIO & ELEGANTE)
       ========================================= */
    .cat-scroll {
        display: flex;
        gap: 18px; /* Espaçamento equilibrado */
        overflow-x: auto;
        padding: 15px 15px 30px; /* Padding para sombra não cortar */
        scrollbar-width: none;
        scroll-behavior: smooth;
    }
    .cat-scroll::-webkit-scrollbar { display: none; }

    .cat-bubble {
        min-width: 80px; /* Largura mínima para manter alinhamento */
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        text-decoration: none;
        transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        cursor: pointer;
    }
    
    /* Círculo Container (Tamanho Médio) */
    .cat-icon-3d {
        width: 102px;  /* Tamanho Médio Perfeito */
        height: 102px;
        border-radius: 24px; /* Squircle Suave */
        background: #FFFFFF;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 
            0 4px 6px -1px rgba(0,0,0,0.02),
            0 10px 15px -3px rgba(0,0,0,0.05); /* Sombra suave */
        border: 1px solid rgba(0,0,0,0.04);
        transition: all 0.3s ease;
        position: relative;
    }

    /* A Imagem 3D */
    .img-3d-pop {
        width: 60px; /* Ícone visível mas não exagerado */
        height: 60px;
        object-fit: contain;
        transition: transform 0.3s ease;
        /* Sombra leve no próprio ícone */
        filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); 
    }

    /* Texto da Categoria */
    .cat-name {
        font-size: 0.8rem;
        font-weight: 600;
        color: #64748B;
        white-space: nowrap;
        transition: color 0.3s;
    }

    /* === HOVER EFFECTS === */
    .cat-bubble:hover {
        transform: translateY(-5px);
    }
    
    .cat-bubble:hover .cat-icon-3d {
        background: #fff;
        border-color: rgba(227, 28, 37, 0.15);
        box-shadow: 0 15px 30px -5px rgba(227, 28, 37, 0.15); /* Glow da marca */
    }

    .cat-bubble:hover .img-3d-pop {
        transform: scale(1.2); /* Zoom suave */
    }
    
    .cat-bubble:hover .cat-name {
        color: var(--k-black);
        font-weight: 700;
    }
    /* ===== ESPAÇAMENTO GLOBAL ENTRE TODAS AS SEÇÕES ===== */
section {
    margin-top: 3cm;
    margin-bottom: 2cm;
}

</style>


<div class="container">

    
<!-- 2. MEGA CARROSSEL -->
<!-- ================= MEGA CARROSSEL / BANNER FULL WIDTH ================= -->
<section class="mega-carousel-container fade-up" style="animation-delay: 0.1s;">
    
    <div id="mainCarousel"
         class="carousel slide carousel-fade"
         data-bs-ride="carousel">

        <div class="carousel-inner">

            <% if (typeof banners !== 'undefined' && banners.length > 0) { %>
                <% banners.forEach((banner, index) => { %>
                    <div class="carousel-item <%= index === 0 ? 'active' : '' %>" data-bs-interval="5000">
                        <a href="<%= banner.link || '#' %>">
                            <img src="<%= banner.imagem %>" alt="Banner">
                        </a>
                    </div>
                <% }) %>
            <% } else { %>

                <!-- FALLBACK (caso não tenha banners) -->
                <div class="carousel-item active">
                    <div class="banner-fallback">
                        <div class="text-center">
                            <h2 class="fw-bold">KuandaShop</h2>
                            <p>Bem-vindo ao futuro do comércio.</p>
                        </div>
                    </div>
                </div>

            <% } %>

        </div>

    </div>

</section>
<!-- ================= FIM MEGA CARROSSEL ================= -->

   <!-- 4. CATEGORIAS (ICONS8 3D FLUENCY - MÉDIO) -->
    <section class="mb-5 fade-up">
        <div class="container">
            <!-- Cabeçalho -->
            <div class="d-flex justify-content-between align-items-center mb-4 px-2">
                <div>
                    <h5 class="fw-bold m-0 text-dark">Explore Nossas categorias</h5>
                </div>
                <a href="/categorias" class="text-danger fw-bold small text-decoration-none bg-white px-3 py-1 rounded-pill border shadow-sm">
                 ver todas    <i class="fas fa-chevron-right ms-1" style="font-size: 0.7rem;"></i>
                </a>
            </div>

            <!-- Lista Horizontal -->
            <div class="cat-scroll d-flex justify-content-lg-center">
                <% 
                // Base URL oficial do Icons8 3D Fluency
                const baseIconUrl = "https://img.icons8.com/3d-fluency/94/";
                
                // Mapeamento Completo (Nome da Categoria -> Arquivo.png)
                const catMap = {
                    'tech': 'iphone.png',
                    'Celulares': 'iphone.png',
                    'Informática': 'laptop.png',
                    'Computadores': 'workstation.png',
                    'cloth': 't-shirt.png',
                    'Roupas': 't-shirt.png',
                    'Casa': 'home.png',
                    'Móveis': 'sofa.png',
                    'Beleza': 'lipstick.png',
                    'Saúde': 'heart-with-pulse.png',
                    'Jogos': 'game-controller.png',
                    'Games': 'game-controller.png',
                    'steering-wheel': 'steering-wheel.png',
                    'steering-wheel': 'steering-wheel.png',
                    'Livros': 'books.png',
                    'Educação': 'graduation-cap.png',
                    'Sapatos': 'sneakers.png',
                    'Tênis': 'sneakers.png',
                    'Esportes': 'basketball.png',
                    'Fitness': 'dumbbell.png',
                    'Música': 'musical-notes.png',
                    'Instrumentos': 'guitar.png',
                    'Infantil': 'teddy-bear.png',
                    'Brinquedos': 'rubiks-cube.png',
                    'Ferramentas': 'hammer.png',
                    'Jardim': 'potted-plant.png',
                    'Relógios': 'watch.png',
                    'Acessórios': 'diamond.png'
                };
                
                // Fallback (Caixa de presente)
                const defaultIcon = 'gift.png'; 
                
                if (typeof categorias !== 'undefined') { categorias.slice(0, 12).forEach(cat => { 
                    let iconName = defaultIcon;
                    
                    // Busca Inteligente: Tenta encontrar correspondência exata ou parcial
                    for (const [key, value] of Object.entries(catMap)) {
                        if (cat.nome.toLowerCase().includes(key.toLowerCase())) {
                            iconName = value;
                            break;
                        }
                    }
                %>
                    <!-- Card Categoria -->
                    <a href="/produtos?categoria=<%= cat.id %>" class="cat-bubble group">
                        
                        <div class="cat-icon-3d">
                            <img src="<%= baseIconUrl + iconName %>" 
                                 alt="<%= cat.nome %>" 
                                 class="img-3d-pop"
                                 loading="lazy">
                        </div>
                        
                        <span class="cat-name text-center d-block text-truncate" style="max-width: 90px;">
                            <%= cat.nome.split(' ')[0] %>
                        </span>
                    </a>
                <% }); } %>
            </div>
        </div>
    </section>

<!-- 6. NOSSOS PLANOS (GRID 3x3 MINI) -->
<section class="mb-5 fade-up">
    <div class="text-center mb-4">
        <h3 class="fw-bold">Nossos Planos</h3>
        <p class="text-muted">Escolha o ideal para o seu negócio</p>
    </div>
    <div class="plans-grid">
        <!-- Plano Básico -->
        <div class="plan-card">
            <div class="plan-name">Básico</div>
            <div class="plan-price">2000<span>Kz</span></div>
            <ul class="plan-features">
                <li><i class="fas fa-check"></i> Grátis no 1 més</li>
                <li><i class="fas fa-check"></i> 10 Produtos</li>
                <li><i class="fas fa-check"></i> Selo Verificado</li>
                <li><i class="fas fa-times text-danger"></i> Suporte por Email</li>
                <li><i class="fas fa-times text-danger"></i> Destaque na Home</li>
                <li><i class="fas fa-times text-danger"></i> Anúncio VIP</li>
            </ul>
              <a href="https://wa.me/244931198559?text=Quero%20adquirir%20o%20Básico"
               id="whatsappLink"
               class="whatsapp-btn"
               target="_blank">
                <i class="fab fa-whatsapp"></i> Enviar Mensagem
            </a>
        </div>
        
        <!-- Plano Destacado -->
        <div class="plan-card plan-featured">
            <div class="badge bg-danger mb-2">MAIS PEDIDO</div>
            <div class="plan-name text-danger">Pro</div>
            <div class="plan-price">5000<span>Kz</span></div>
            <ul class="plan-features">
                <li><i class="fas fa-check"></i> 200 Produtos</li>
                <li><i class="fas fa-check"></i> 1 Destaque na Home</li>
                <li><i class="fas fa-check"></i> Suporte Prioritário</li>
                <li><i class="fas fa-check"></i> Selo Verificado</li>
                <li><i class="fas fa-check"></i> 2 Anúncios VIP</li>
                <li><i class="fas fa-check"></i> Estatísticas Avançadas</li>
            </ul>
            <a href="https://wa.me/244931198559?text=Quero%20adquirir%20o%20Pro"
               id="whatsappLink"
               class="whatsapp-btn"
               target="_blank">
                <i class="fab fa-whatsapp"></i> Enviar Mensagem
            </a>
        </div>

        <!-- Plano Enterprise -->
        <div class="plan-card">
            <div class="plan-name">Elite</div>
            <div class="plan-price">10.000<span>Kz</span></div>
            <ul class="plan-features">
                <li><i class="fas fa-check"></i> 10000 Produtos</li>
                <li><i class="fas fa-check"></i> Selo Verificado</li>
                <li><i class="fas fa-check"></i> 10 Destaques na Home</li>
                <li><i class="fas fa-check"></i> Gestor Dedicado</li>
                <li><i class="fas fa-check"></i> Suporte 24/7</li>
                <li><i class="fas fa-check"></i> Indicação da Loja</li>
                <li><i class="fas fa-check"></i> Destaque nas Redes Sociais</li>
                <li><i class="fas fa-check"></i> Anúncios VIP Ilimitados</li>
            </ul>
            <a href="https://wa.me/244931198559?text=Quero%20adquirir%20o%20Enterprise"
               id="whatsappLink"
               class="whatsapp-btn"
               target="_blank">
                <i class="fab fa-whatsapp"></i> Enviar Mensagem
            </a>

        </div>
    </div>
</section>

    
<!-- ================= STATIC ADS PREMIUM ================= -->
<section class="featured-ads-section fade-up" style="animation-delay: 0.2s;">
    <div class="featured-ads-grid">

        <a href="/produtos" class="featured-ad-card">
            <img src="/images/show1.png" alt="Eletrônicos" loading="lazy">
            <span class="ad-badge">PRODUTOS</span>
        </a>

        <a href="/categorias" class="featured-ad-card">
            <img src="/images/show2.png" alt="Categorias" loading="lazy">
            <span class="ad-badge gold">NOVIDADE</span>
        </a>

        <a href="/ofertas" class="featured-ad-card">
            <img src="/images/show3.png" alt="Ofertas" loading="lazy">
            <span class="ad-badge red">OFERTAS</span>
        </a>

    </div>
</section>
<!-- ================= END STATIC ADS ================= -->


    <!-- 7. PRODUTOS VIP (GRID 3x3) -->
    <% if (typeof produtosVip !== 'undefined' && produtosVip.length > 0) { %>
    <section class="mb-5 fade-up">
        <div class="d-flex align-items-center gap-2 mb-3">
            <div class="bg-warning rounded p-1"><i class="fas fa-crown text-black"></i></div>
            <h4 class="fw-bold m-0">Destaques VIP</h4>
        </div>
        <div class="product-grid-wrapper">
            <% produtosVip.forEach(prod => { %>
                <div class="mini-card">
                    <span class="position-absolute top-0 start-0 m-1 badge bg-warning text-dark" style="font-size:0.6rem; z-index:2;">VIP</span>
                    <a href="/produto/<%= prod.id %>" class="mini-img-box">
                        <img src="/uploads/produtos/<%= prod.imagem1 %>" class="mini-img" loading="lazy">
                    </a>
                    <button class="mini-btn-add" onclick="addToCart(<%= prod.id %>, '<%= prod.nome.replace(/'/g, "\\'") %>')">
                        <i class="fas fa-plus"></i>
                    </button>
                    <div class="mini-body">
                        <h3 class="mini-title"><%= prod.nome %></h3>
                        <div class="mt-auto">
                            <div class="mini-price"><%= Number(prod.preco).toLocaleString('pt-AO') %> Kz</div>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
    </section>
    <% } %>

    <!-- 8. VIDEO ADS (PUBLICIDADE PREMIUM) -->
<section class="mb-5 fade-up video-ads-section">
    <h4 class="fw-bold mb-4">
        <i class="fas fa-play-circle text-danger"></i> Em Destaque
    </h4>

    <div class="video-glass-grid">

        <div class="video-glass-card">
            <video autoplay loop muted playsinline poster="/images/video-poster-1.jpg">
                <source src="/videos/ad1.mp4" type="video/mp4">
            </video>

            <div class="glass-overlay">
                <h5>Tecnologia de Ponta</h5>
                <span>Patrocinado</span>
            </div>
        </div>

        <div class="video-glass-card">
            <video autoplay loop muted playsinline poster="/images/video-poster-2.jpg">
                <source src="/videos/ad2.mp4" type="video/mp4">
            </video>

            <div class="glass-overlay">
                <h5>Moda Angolana</h5>
                <span>Patrocinado</span>
            </div>
        </div>

        <div class="video-glass-card">
            <video autoplay loop muted playsinline poster="/images/video-poster-2.jpg">
                <source src="/videos/ad2.mp4" type="video/mp4">
            </video>

            <div class="glass-overlay">
                <h5>Kuanda Shop</h5>
                <span>Patrocinado</span>
            </div>
        </div>

        <div class="video-glass-card">
            <video autoplay loop muted playsinline poster="/images/video-poster-1.jpg">
                <source src="/videos/ad1.mp4" type="video/mp4">
            </video>

            <div class="glass-overlay">
                <h5>Destaque vip</h5>
                <span>Patrocinado</span>
            </div>
        </div>        
        <!-- podes duplicar até ter 4, 8, etc -->
    </div>
</section>

   
    <!-- 10. OFERTAS RELÂMPAGO -->
    <% if (typeof produtosOferta !== 'undefined' && produtosOferta.length > 0) { %>
    <section class="mb-5 fade-up">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="fw-bold m-0 text-danger">Ofertas Relâmpago <i class="fas fa-bolt"></i></h4>
            <span class="badge bg-danger">Expira em breve</span>
        </div>
        <div class="product-grid-wrapper">
            <% produtosOferta.forEach(prod => { 
               const pOfe = Number(prod.preco_promocional) || 0;
               const pOld = Number(prod.preco) || 0;
               const desc = pOld > 0 ? Math.round(((pOld-pOfe)/pOld)*100) : 0;
            %>
                <div class="mini-card border-danger">
                    <span class="position-absolute top-0 start-0 m-1 badge bg-danger" style="font-size:0.6rem; z-index:2;">-<%= desc %>%</span>
                    <a href="/produto/<%= prod.id %>" class="mini-img-box">
                        <img src="/uploads/produtos/<%= prod.imagem1 %>" class="mini-img" loading="lazy">
                    </a>
                    <button class="mini-btn-add bg-danger text-white" onclick="addToCart(<%= prod.id %>, '<%= prod.nome.replace(/'/g, "\\'") %>')">
                        <i class="fas fa-shopping-cart"></i>
                    </button>
                    <div class="mini-body">
                        <h3 class="mini-title"><%= prod.nome %></h3>
                        <div class="mt-auto">
                            <div class="mini-price text-danger"><%= pOfe.toLocaleString('pt-AO') %> Kz</div>
                            <small class="mini-old"><%= pOld.toLocaleString('pt-AO') %> Kz</small>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
    </section>
    <% } %>
    

</div> <!-- Fim Container -->


<!-- 11. CINEMA ZAP (DARK MODE) -->
<% if (typeof filmes !== 'undefined' && filmes.length > 0) { %>
<section class="cinema-section fade-up">
    <div class="container">
        <div class="d-flex justify-content-between align-items-end mb-4">
            <div>
                <span class="text-warning small fw-bold tracking-wider">ENTRETENIMENTO</span>
                <h2 class="fw-bold m-0">Filmes em exibição Nos Cinemas </h2>
            </div>
            <a href="/filmes" class="text-white-50 text-decoration-none small">Ver todos <i class="fas fa-arrow-right ms-1"></i></a>
        </div>

        <div class="movie-grid">
            <% filmes.forEach(filme => { %>
                <div class="movie-card" onclick="playTrailer('<%= filme.trailer_url %>', '<%= filme.titulo %>')">
                    <% if (filme.poster) { %>
                        <img src="/uploads/filmes/<%= filme.poster %>" class="movie-img" alt="<%= filme.titulo %>">
                    <% } else { %>
                        <div class="w-100 h-100 bg-dark d-flex align-items-center justify-content-center text-secondary"><i class="fas fa-film"></i></div>
                    <% } %>
                    <div class="play-overlay">
                        <div class="rounded-circle bg-danger text-white d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                            <i class="fas fa-play ms-1"></i>
                        </div>
                    </div>
                    <% if (filme.classificacao) { %>
                        <div class="movie-badge"><%= filme.classificacao %></div>
                    <% } %>
                </div>
            <% }) %>
        </div>
    </div>
</section>



<script>
    function playTrailer(url, title) {
        if (!url) return;
        const extractId = (u) => {
            const m = u.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);
            return (m && m[2].length === 11) ? m[2] : null;
        };
        const vId = extractId(url);
        if (vId) {
            const m = new bootstrap.Modal(document.getElementById('trailerModal'));
            document.getElementById('trailerModalTitle').textContent = title;
            document.getElementById('trailerIframe').src = 'https://www.youtube.com/embed/' + vId + '?autoplay=1';
            m.show();
            document.getElementById('trailerModal').addEventListener('hidden.bs.modal', () => {
                 document.getElementById('trailerIframe').src = '';
            });
        } else { window.open(url, '_blank'); }
    }
</script>
<% } %>

<!-- 12. APP DOWNLOAD -->
<div class="container mb-5 fade-up">
    <div class="bg-dark rounded-4 p-4 p-lg-5 position-relative overflow-hidden shadow-lg" style="background: linear-gradient(135deg, #111 0%, #2a2a2a 100%);">
        <div class="position-absolute top-0 end-0 bg-danger opacity-25 rounded-circle" style="width:300px; height:300px; filter:blur(60px); transform:translate(30%, -30%);"></div>
        
        <div class="row align-items-center position-relative z-1">
            <div class="col-lg-6 text-center text-lg-start mb-4 mb-lg-0">
                <span class="badge bg-warning text-dark mb-2">NOVO APP</span>
                <h2 class="text-white fw-bold mb-3">Baixe o App KuandaShop</h2>
                <p class="text-secondary mb-4">A melhor experiência de compra de Angola no seu bolso.</p>
                <div class="d-flex gap-3 justify-content-center justify-content-lg-start">
                    <button class="btn btn-light rounded-pill px-4 fw-bold"><i class="fab fa-apple me-2"></i> iOS</button>
                    <button class="btn btn-outline-light rounded-pill px-4 fw-bold"><i class="fab fa-android me-2"></i> Android</button>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <img src="/images/app-mockup.png" onerror="this.style.display='none'" class="img-fluid" style="max-height: 300px; transform: rotate(-5deg);">
            </div>
        </div>
    </div>
</div>

<script>
    // Animação de Scroll
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animationPlayState = 'running';
                observer.unobserve(entry.target);
            }
        });
    });
    
    document.querySelectorAll('.fade-up').forEach(el => {
        el.style.animationPlayState = 'paused';
        observer.observe(el);
    });
</script>

<script>
// Configurações do WhatsApp
const ADMIN_PHONE = "244999999999"; // Substitua pelo número real do admin
const ADMIN_NAME = "Admin KuandaShop";
const ADMIN_EMAIL = "admin@kuandashop.ao";

function openWhatsAppModal(planoNome, preco) {
    // Atualizar informações no modal
    document.getElementById('planoSelecionado').textContent = `Plano ${planoNome} - ${preco} Kz/mês`;
    
    // Criar mensagem personalizada
    const user = '<%= user ? user.nome : "Novo Usuário" %>';
    const userEmail = '<%= user ? user.email : "Não logado" %>';
    
    let mensagem = `Olá ${ADMIN_NAME}!\n\n`;
    mensagem += `Gostaria de solicitar o Plano ${planoNome} no valor de ${preco} Kz/mês.\n\n`;
    mensagem += `Meus dados:\n`;
    mensagem += `Nome: ${user}\n`;
    mensagem += `Email: ${userEmail}\n\n`;
    mensagem += `Por favor, entre em contato para prosseguir com a adesão.`;
    
    // Codificar a mensagem para URL
    const mensagemCodificada = encodeURIComponent(mensagem);
    
    // Criar link do WhatsApp
    const whatsappLink = `https://wa.me/${ADMIN_PHONE}?text=${mensagemCodificada}`;
    
    // Atualizar o link no botão
    document.getElementById('whatsappLink').href = whatsappLink;
    
    // Mostrar modal
    const modal = new bootstrap.Modal(document.getElementById('whatsappModal'));
    modal.show();
}

// Se quiser uma alternativa mais simples (sem modal):
function enviarWhatsAppDireto(planoNome, preco) {
    const mensagem = `Olá! Gostaria de solicitar o Plano ${planoNome} no valor de ${preco} Kz/mês no KuandaShop.`;
    const mensagemCodificada = encodeURIComponent(mensagem);
    const whatsappLink = `https://wa.me/${ADMIN_PHONE}?text=${mensagemCodificada}`;
    window.open(whatsappLink, '_blank');
}

// Opção: Formulário alternativo se não quiser WhatsApp
function abrirFormularioPlano(planoNome, preco) {
    // Armazenar plano selecionado no localStorage
    localStorage.setItem('planoSelecionado', planoNome);
    localStorage.setItem('precoPlano', preco);
    
    // Redirecionar para página de registro
    window.location.href = `/registro?plano=${planoNome.toLowerCase()}`;
}
</script>
